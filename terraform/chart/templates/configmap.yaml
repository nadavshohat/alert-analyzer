apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "alert-analyzer.fullname" . }}-config
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "alert-analyzer.labels" . | nindent 4 }}
data:
  CLICKHOUSE_HOST: {{ .Values.clickhouse.host | quote }}
  CLICKHOUSE_PORT: {{ .Values.clickhouse.port | quote }}
  CLICKHOUSE_USER: {{ .Values.clickhouse.user | quote }}
  CLICKHOUSE_DATABASE: {{ .Values.clickhouse.database | quote }}
  POLL_INTERVAL_SECONDS: {{ .Values.agent.pollInterval | quote }}
  DEDUP_WINDOW_SECONDS: {{ .Values.agent.dedupWindow | quote }}
  LOG_LOOKBACK_MINUTES: {{ .Values.agent.logLookbackMinutes | quote }}
  EXCLUDE_NAMESPACES: {{ .Values.events.excludeNamespaces | quote }}
  EVENT_REASONS: {{ .Values.events.reasons | quote }}
  BEDROCK_REGION: {{ .Values.bedrock.region | quote }}
  BEDROCK_MODEL: {{ .Values.bedrock.model | quote }}
  BEDROCK_MAX_TOKENS: {{ .Values.bedrock.maxTokens | quote }}
  MAX_AGENT_TURNS: {{ .Values.agent.maxTurns | quote }}
  GROUNDCOVER_BASE_URL: {{ .Values.groundcover.baseUrl | quote }}
  CLUSTER_NAME: {{ .Values.groundcover.clusterName | quote }}
  TZ: {{ .Values.timezone | quote }}
